MPI_Recv(NULL, 0, MPI_BYTE, prev, TERMINATE_TAG, MPI_COMM_WORLD, &status);

    NULL (буфер)

        Что это: Указатель на место в памяти, куда сохранить полученные данные.

        Почему здесь NULL: Потому что это просто сигнал (команда "стоп"). Мы не ожидаем получить какие-либо данные, поэтому нам не нужно место для их хранения.

    0 (размер)

        Что это: Сколько элементов данных мы ожидаем получить.

        Почему здесь 0: Мы ожидаем сообщение размером 0 байт, так как это пустой сигнал.

    MPI_BYTE (тип данных)

        Что это: Тип данных, которые мы принимаем (например, MPI_INT, MPI_DOUBLE).

        Почему здесь MPI_BYTE: Это самый базовый тип ("сырой" байт). Поскольку мы все равно принимаем 0 элементов, этот параметр не так важен, но MPI_BYTE — стандартный выбор для "пустых" или сырых сообщений.

    prev (источник)

        Что это: Ранг (ID) процесса, от которого мы ожидаем сообщение.

        Почему здесь prev: Мы принимаем сигнал от нашего предыдущего соседа по кольцу, чтобы "волна завершения" шла по порядку.

    TERMINATE_TAG (тег)

        Что это: "Этикетка" (тег) сообщения.

        Почему здесь TERMINATE_TAG: Мы конкретно ждем сообщение с тегом TERMINATE_TAG (сигнал "стоп"), а не обычное сообщение с MSG_TAG.

    MPI_COMM_WORLD (коммуникатор)

        Что это: Группа процессов, внутри которой происходит обмен.

        Почему здесь MPI_COMM_WORLD: Это коммуникатор по умолчанию, включающий все процессы, запущенные mpirun.

    &status (статус)

        Что это: Указатель на структуру MPI_Status.

        Зачем нужен: MPI должен куда-то записать информацию о приеме (например, от кого на самом деле пришло, какой на самом деле был тег). Даже если нам эта информация не нужна, мы обязаны предоставить эту переменную.


MPI_Iprobe(prev, MPI_ANY_TAG, MPI_COMM_WORLD, &flag, &status);


    prev (источник): Указывает, от какого процесса-отправителя мы проверяем сообщение. В вашем коде это переменная, хранящая ранг (ID) предыдущего узла в кольце.

    MPI_ANY_TAG (тег): Указывает, какой "тег" (этикетку) сообщения мы ищем. MPI_ANY_TAG — это "джокер", означающий "проверить сообщение с любым тегом". Это позволяет одним вызовом поймать как обычные сообщения (MSG_TAG), так и сигнал завершения (TERMINATE_TAG).

    MPI_COMM_WORLD (коммуникатор): Определяет группу процессов, в которой происходит общение. MPI_COMM_WORLD — это стандартный коммуникатор, включающий все запущенные процессы.

    &flag (флаг, выходной параметр): Это главный результат функции. MPI_Iprobe немедленно записывает по этому адресу 1 (истина), если сообщение найдено, или 0 (ложь), если очередь пуста.

    &status (статус, выходной параметр): Указатель на структуру MPI_Status. Если сообщение найдено (flag стал 1), MPI запишет сюда его "метаданные": от кого оно пришло и (самое важное) какой у него на самом деле тег (доступный через status.MPI_TAG).
